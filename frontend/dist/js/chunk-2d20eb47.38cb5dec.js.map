{"version":3,"sources":["webpack:///./src/pages/general/AbandonedCallers.vue?a9dc","webpack:///src/pages/general/AbandonedCallers.vue","webpack:///./src/pages/general/AbandonedCallers.vue?74b8","webpack:///./src/pages/general/AbandonedCallers.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","model","value","callback","$$v","time1","expression","_v","time2","queues","selectedQueue","loading","nativeOn","$event","getAbandoned","apply","arguments","table","length","fileName","header","legend","staticRenderFns","name","components","Page","DatePicker","LaddaBtn","Table","metaInfo","title","data","phoneMask0","phoneMask1","phoneMask2","phone","moment","hour","minute","second","toDate","noanswered","busy","tel","mounted","$store","commit","loadQueues","methods","_process$env$VUE_APP_","_this","axios","post","concat","process","location","origin","then","catch","err","console","log","_process$env$VUE_APP_2","_this2","params","URLSearchParams","append","format","$bvToast","toast","autoHideDelay","appendToast","toastClass","updateHeader","finally","x","push","component"],"mappings":"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","file":"js/chunk-2d20eb47.38cb5dec.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('Page',[_c('b-form',[_c('b-form-row',[_c('b-form-group',{staticClass:\"col-md-auto\",attrs:{\"label\":\"Data Início\"}},[_c('date-picker',{staticClass:\"mt-1\",attrs:{\"format\":\"DD-MM-YYYY HH:mm:ss\",\"type\":\"datetime\"},model:{value:(_vm.time1),callback:function ($$v) {_vm.time1=$$v},expression:\"time1\"}})],1),_vm._v(\" \"),_c('b-form-group',{staticClass:\"col-md-auto\",attrs:{\"label\":\"Data Final\"}},[_c('date-picker',{staticClass:\"mt-1\",attrs:{\"format\":\"DD-MM-YYYY HH:mm:ss\",\"type\":\"datetime\"},model:{value:(_vm.time2),callback:function ($$v) {_vm.time2=$$v},expression:\"time2\"}})],1),_vm._v(\" \"),_c('b-form-group',{staticClass:\"col-md-auto\",attrs:{\"label\":\"Campanhas\"}},[_c('b-select',{attrs:{\"plain\":\"\",\"options\":_vm.queues,\"size\":\"md\"},model:{value:(_vm.selectedQueue),callback:function ($$v) {_vm.selectedQueue=$$v},expression:\"selectedQueue\"}},[_c('b-select-option',{attrs:{\"value\":\"\"}},[_vm._v(\"Todas as Campanhas\")])],1)],1)],1),_vm._v(\" \"),_c('b-form-row',[_c('ladda-btn',{staticClass:\"btn btn-success\",attrs:{\"loading\":_vm.loading,\"data-style\":\"expand-left\"},nativeOn:{\"click\":function($event){return _vm.getAbandoned.apply(null, arguments)}}},[_vm._v(\"Visualizar\")])],1)],1)],1),_vm._v(\" \"),_c('Page',{attrs:{\"hidden\":_vm.table.length == 0}},[_c('Table',{attrs:{\"tableData\":_vm.table,\"filename\":_vm.fileName,\"header\":_vm.header,\"legend\":_vm.legend}})],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <Page>\n      <b-form>\n        <b-form-row>\n          <b-form-group label=\"Data Início\" class=\"col-md-auto\">\n            <date-picker\n              v-model=\"time1\"\n              format=\"DD-MM-YYYY HH:mm:ss\"\n              class=\"mt-1\"\n              type=\"datetime\"\n            ></date-picker>\n          </b-form-group>\n          <b-form-group label=\"Data Final\" class=\"col-md-auto\">\n            <date-picker\n              v-model=\"time2\"\n              format=\"DD-MM-YYYY HH:mm:ss\"\n              class=\"mt-1\"\n              type=\"datetime\"\n            ></date-picker>\n          </b-form-group>\n          <b-form-group label=\"Campanhas\" class=\"col-md-auto\">\n            <b-select plain v-model=\"selectedQueue\" :options=\"queues\" size=\"md\">\n              <b-select-option value=\"\">Todas as Campanhas</b-select-option>\n            </b-select>\n          </b-form-group>\n        </b-form-row>\n        <b-form-row>\n          <ladda-btn\n            :loading=\"loading\"\n            data-style=\"expand-left\"\n            class=\"btn btn-success\"\n            @click.native=\"getAbandoned\"\n            >Visualizar</ladda-btn\n          >\n        </b-form-row>\n      </b-form>\n    </Page>\n    <Page :hidden=\"table.length == 0\">\n      <Table :tableData=\"table\" :filename=\"fileName\" :header=\"header\" :legend=\"legend\"/>\n    </Page>\n  </div>\n</template>\n<script>\nimport Page from '@/components/Page'\nimport DatePicker from 'vue2-datepicker'\nimport '@/vendor/libs/vue2-datepicker/locale/pt-br'\nimport moment from 'moment'\nimport LaddaBtn from '@/vendor/libs/ladda/Ladda'\nimport Table from '@/components/Table'\nimport axios from 'axios'\nexport default {\n  name: 'home',\n  components: {\n    Page,\n    DatePicker,\n    LaddaBtn,\n    Table\n  },\n  metaInfo: {\n    title: 'Relatório de Chamadas Abandonadas'\n  },\n  data: () => ({\n    loading: false,\n    phoneMask0: ['(', /[1-9]/, /\\d/, ')', ' ', /\\d/, /\\d/, /\\d/, /\\d/, /\\d/, /\\d/, /\\d/, /\\d/],\n    phoneMask1: ['(', /[1-9]/, /\\d/, ')', ' ', /\\d/, /\\d/, /\\d/, /\\d/, /\\d/, /\\d/, /\\d/, /\\d/],\n    phoneMask2: ['(', /[1-9]/, /\\d/, ')', ' ', /\\d/, /\\d/, /\\d/, /\\d/, /\\d/, /\\d/, /\\d/, /\\d/, /\\d/],\n    phone: '',\n    time1: moment().hour(0).minute(0).second(0).toDate(),\n    time2: moment().hour(23).minute(59).second(59).toDate(),\n    noanswered: false,\n    busy: false,\n    tel: '',\n    table: [],\n    header: [],\n    legend: [],\n    fileName: '',\n    queues: [],\n    selectedQueue: ''\n  }),\n  mounted () {\n    this.$store.commit('setTitle', 'Relatório de Chamadas Abandonadas')\n    this.loadQueues()\n  },\n  methods: {\n    loadQueues: function () {\n      axios\n        .post(\n          `${process.env.VUE_APP_ROOT_API ??\n            location.origin}/reportsbackend/queues.php`\n        )\n        .then(data => {\n          this.queues = data.data\n        })\n        .catch(err => console.log(err))\n    },\n    getAbandoned () {\n      this.loading = true\n      const params = new URLSearchParams()\n      params.append('time1', moment(this.time1).format('YYYY-MM-DD HH:mm:ss'))\n      params.append('time2', moment(this.time2).format('YYYY-MM-DD HH:mm:ss'))\n      params.append('selectedQueue', this.selectedQueue)\n\n      axios.post(`${process.env.VUE_APP_ROOT_API ?? location.origin}/reportsbackend/report_abandoned.php`, params).then(data => {\n        if (data.data.length === 0) {\n          this.$bvToast.toast('Nenhum registro encontrado', {\n            title: 'Tecnomafer Report',\n            autoHideDelay: 5000,\n            appendToast: true,\n            toastClass: 'bs4-toast bg-danger'\n          })\n        }\n        this.table = data.data\n        this.updateHeader()\n      }\n      ).catch(err => console.log(err)).finally(x => { this.loading = false })\n    },\n    updateHeader () {\n      this.header = []\n      this.header.push('<h4>Relatório de Chamadas Abandonadas</h4>')\n      this.header.push(`Período ${moment(this.time1).format('DD/MM/YYYY')} à ${moment(this.time2).format('DD/MM/YYYY')} / Hora à ${moment(this.time1).format('HH:mm:ss')} até ${moment(this.time2).format('HH:mm:ss')}`)\n      this.header.push(' ')\n\n      this.legend = ['<h5>Legenda:</h5>',\n        '<b>Data da Chamada</b> - Data da chamada;',\n        '<b>TE</b> - Tempo de esperado do cliente;',\n        '<b>Número</b> - Número do cliente;',\n        `<b>Emitido em:</b> ${moment().format('DD/MM/YYYY HH:mm:ss')}`]\n\n      this.fileName = `Rel_geral_chamadas_abandonadas ${moment().format('DD_MM_YYYY_HH_mm_ss')}`\n    }\n\n  }\n}\n</script>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AbandonedCallers.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AbandonedCallers.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./AbandonedCallers.vue?vue&type=template&id=ca77bc2e\"\nimport script from \"./AbandonedCallers.vue?vue&type=script&lang=js\"\nexport * from \"./AbandonedCallers.vue?vue&type=script&lang=js\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}