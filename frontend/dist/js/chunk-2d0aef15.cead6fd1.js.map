{"version":3,"sources":["webpack:///./src/pages/agents/ActiveLayer.vue?8ed6","webpack:///src/pages/agents/ActiveLayer.vue","webpack:///./src/pages/agents/ActiveLayer.vue?71a8","webpack:///./src/pages/agents/ActiveLayer.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","model","value","callback","$$v","time1","expression","_v","time2","tel","noanswered","busy","loading","nativeOn","$event","getActiveLayer","apply","arguments","table","length","fileName","header","legend","staticRenderFns","name","components","Page","DatePicker","LaddaBtn","Table","metaInfo","title","data","phoneMask0","phoneMask1","phoneMask2","phone","moment","hour","minute","second","toDate","agents","mounted","$store","commit","getAgents","methods","_process$env$VUE_APP_","_this","axios","post","concat","process","location","origin","then","catch","err","console","log","finally","x","_process$env$VUE_APP_2","_this2","params","URLSearchParams","append","format","$bvToast","toast","autoHideDelay","appendToast","toastClass","tempTable","forEach","agentOri","find","y","number","Origem","agentDest","Destino","undefined","updateHeader","push","component"],"mappings":"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","file":"js/chunk-2d0aef15.cead6fd1.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('Page',[_c('b-form',[_c('b-form-row',[_c('b-form-group',{staticClass:\"col-md-auto\",attrs:{\"label\":\"Data Início\"}},[_c('date-picker',{staticClass:\"mt-1\",attrs:{\"format\":\"DD-MM-YYYY HH:mm:ss\",\"type\":\"datetime\"},model:{value:(_vm.time1),callback:function ($$v) {_vm.time1=$$v},expression:\"time1\"}})],1),_vm._v(\" \"),_c('b-form-group',{staticClass:\"col-md-auto\",attrs:{\"label\":\"Data Final\"}},[_c('date-picker',{staticClass:\"mt-1\",attrs:{\"format\":\"DD-MM-YYYY HH:mm:ss\",\"type\":\"datetime\"},model:{value:(_vm.time2),callback:function ($$v) {_vm.time2=$$v},expression:\"time2\"}})],1),_vm._v(\" \"),_c('b-form-group',{staticClass:\"col-md-auto\",attrs:{\"label\":\"Telefone\"}},[_c('the-mask',{staticClass:\"form-control\",attrs:{\"mask\":['###', '(##) #####-####', '(##) ####-####']},model:{value:(_vm.tel),callback:function ($$v) {_vm.tel=$$v},expression:\"tel\"}})],1)],1),_vm._v(\" \"),_c('b-form-row',[_c('b-form-group',{staticClass:\"col-md-auto\",attrs:{\"label-align-md\":\"right\"}},[_c('b-check',{model:{value:(_vm.noanswered),callback:function ($$v) {_vm.noanswered=$$v},expression:\"noanswered\"}},[_vm._v(\"Não Atendidas\")])],1),_vm._v(\" \"),_c('b-form-group',{staticClass:\"col-md-auto\",attrs:{\"label-align-md\":\"right\"}},[_c('b-check',{model:{value:(_vm.busy),callback:function ($$v) {_vm.busy=$$v},expression:\"busy\"}},[_vm._v(\"Ocupadas\")])],1)],1),_vm._v(\" \"),_c('b-form-row',[_c('ladda-btn',{staticClass:\"btn btn-success\",attrs:{\"loading\":_vm.loading,\"data-style\":\"expand-left\"},nativeOn:{\"click\":function($event){return _vm.getActiveLayer.apply(null, arguments)}}},[_vm._v(\"Visualizar\")])],1)],1)],1),_vm._v(\" \"),_c('Page',{attrs:{\"hidden\":_vm.table.length == 0}},[_c('Table',{attrs:{\"tableData\":_vm.table,\"filename\":_vm.fileName,\"header\":_vm.header,\"legend\":_vm.legend}})],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <Page>\n      <b-form>\n        <b-form-row>\n          <b-form-group label=\"Data Início\" class=\"col-md-auto\">\n            <date-picker\n              v-model=\"time1\"\n              format=\"DD-MM-YYYY HH:mm:ss\"\n              class=\"mt-1\"\n              type=\"datetime\"\n            ></date-picker>\n          </b-form-group>\n          <b-form-group label=\"Data Final\" class=\"col-md-auto\">\n            <date-picker\n              v-model=\"time2\"\n              format=\"DD-MM-YYYY HH:mm:ss\"\n              class=\"mt-1\"\n              type=\"datetime\"\n            ></date-picker>\n          </b-form-group>\n          <b-form-group label=\"Telefone\" class=\"col-md-auto\">\n            <the-mask\n              v-model=\"tel\"\n              class=\"form-control\"\n              :mask=\"['###', '(##) #####-####', '(##) ####-####']\"\n            />\n          </b-form-group>\n        </b-form-row>\n        <b-form-row>\n          <b-form-group label-align-md=\"right\" class=\"col-md-auto\">\n            <b-check v-model=\"noanswered\">Não Atendidas</b-check>\n          </b-form-group>\n          <b-form-group label-align-md=\"right\" class=\"col-md-auto\">\n            <b-check v-model=\"busy\">Ocupadas</b-check>\n          </b-form-group>\n        </b-form-row>\n        <b-form-row>\n          <ladda-btn\n            :loading=\"loading\"\n            data-style=\"expand-left\"\n            class=\"btn btn-success\"\n            @click.native=\"getActiveLayer\"\n            >Visualizar</ladda-btn\n          >\n        </b-form-row>\n      </b-form>\n    </Page>\n    <Page :hidden=\"table.length == 0\">\n      <Table :tableData=\"table\" :filename=\"fileName\" :header=\"header\" :legend=\"legend\"/>\n    </Page>\n  </div>\n</template>\n<script>\nimport Page from '@/components/Page'\nimport DatePicker from 'vue2-datepicker'\nimport '@/vendor/libs/vue2-datepicker/locale/pt-br'\nimport moment from 'moment'\nimport LaddaBtn from '@/vendor/libs/ladda/Ladda'\nimport Table from '@/components/Table'\nimport axios from 'axios'\nexport default {\n  name: 'home',\n  components: {\n    Page,\n    DatePicker,\n    LaddaBtn,\n    Table\n  },\n  metaInfo: {\n    title: 'Relatório de Chamadas Ativas por Telefone'\n  },\n  data: () => ({\n    loading: false,\n    phoneMask0: ['(', /[1-9]/, /\\d/, ')', ' ', /\\d/, /\\d/, /\\d/, /\\d/, /\\d/, /\\d/, /\\d/, /\\d/],\n    phoneMask1: ['(', /[1-9]/, /\\d/, ')', ' ', /\\d/, /\\d/, /\\d/, /\\d/, /\\d/, /\\d/, /\\d/, /\\d/],\n    phoneMask2: ['(', /[1-9]/, /\\d/, ')', ' ', /\\d/, /\\d/, /\\d/, /\\d/, /\\d/, /\\d/, /\\d/, /\\d/, /\\d/],\n    phone: '',\n    time1: moment().hour(0).minute(0).second(0).toDate(),\n    time2: moment().hour(23).minute(59).second(59).toDate(),\n    noanswered: false,\n    busy: false,\n    agents: [],\n    tel: '',\n    table: [],\n    header: [],\n    legend: [],\n    fileName: ''\n  }),\n  mounted () {\n    this.$store.commit('setTitle', 'Relatório de Chamadas Ativas por Telefone')\n    this.getAgents()\n  },\n  methods: {\n    getAgents () {\n      axios.post(`${process.env.VUE_APP_ROOT_API ?? location.origin}/reportsbackend/agents_callcenter_ramal.php`).then(data => {\n        this.agents = data.data\n      }\n      ).catch(err => console.log(err)).finally(x => { this.loading = false })\n    },\n    getActiveLayer () {\n      this.loading = true\n      const params = new URLSearchParams()\n      params.append('time1', moment(this.time1).format('YYYY-MM-DD HH:mm:ss'))\n      params.append('time2', moment(this.time2).format('YYYY-MM-DD HH:mm:ss'))\n      params.append('noanswered', this.noanswered ? '1' : '0')\n      params.append('busy', this.busy ? '1' : '0')\n      params.append('tel', this.tel)\n      axios.post(`${process.env.VUE_APP_ROOT_API ?? location.origin}/reportsbackend/report_active_layer.php`, params).then(data => {\n        if (data.data.length === 0) {\n          this.$bvToast.toast('Nenhum registro encontrado', {\n            title: 'Tecnomafer Report',\n            autoHideDelay: 5000,\n            appendToast: true,\n            toastClass: 'bs4-toast bg-danger'\n          })\n        }\n        const tempTable = data.data\n        tempTable.forEach((x) => {\n          const agentOri = this.agents.find(y => y.number === x.Origem)\n          const agentDest = this.agents.find(y => y.number === x.Destino)\n          if (agentOri !== undefined) {\n            x.Origem = agentOri.name\n          }\n          if (agentDest !== undefined) {\n            x.Destino = agentDest.name\n          }\n        })\n\n        this.table = tempTable\n        this.updateHeader()\n      }\n      ).catch(err => console.log(err)).finally(x => { this.loading = false })\n    },\n    updateHeader () {\n      this.header = []\n      this.header.push('<h4>Relatório de Chamadas Ativas por Telefone</h4>')\n      this.header.push(`Período ${moment(this.time1).format('DD/MM/YYYY')} à ${moment(this.time2).format('DD/MM/YYYY')} / Hora à ${moment(this.time1).format('HH:mm:ss')} até ${moment(this.time2).format('HH:mm:ss')}`)\n      this.header.push(' ')\n\n      this.legend = ['<h5>Legenda:</h5>',\n        '<b>Ramal</b> - Ramal do do agente;',\n        '<b>Agente</b> - Telefone do agente;',\n        '<b>Destino</b> - Telefone de destino;',\n        '<b>Duração</b> - Tempo da duração da chamada',\n        '<b>Evento</b> - Evento da chamada;',\n        `<b>Emitido em:</b> ${moment().format('DD/MM/YYYY HH:mm:ss')}`]\n\n      this.fileName = `Rel_agente_desempenho ${moment().format('DD_MM_YYYY_HH_mm_ss')}`\n    }\n\n  }\n}\n</script>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ActiveLayer.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ActiveLayer.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./ActiveLayer.vue?vue&type=template&id=27883510\"\nimport script from \"./ActiveLayer.vue?vue&type=script&lang=js\"\nexport * from \"./ActiveLayer.vue?vue&type=script&lang=js\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}