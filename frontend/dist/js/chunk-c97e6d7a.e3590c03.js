(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c97e6d7a"],{ade3:function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));a("7a82");var s=a("a38e");function o(e,t,a){return(t=Object(s["a"])(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}},b92f:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("Page",[a("b-form",[a("b-form-row",[a("b-form-group",{staticClass:"col-md-auto",attrs:{label:"Data Início"}},[a("date-picker",{staticClass:"mt-1",attrs:{format:"DD-MM-YYYY",type:"date"},model:{value:e.date1,callback:function(t){e.date1=t},expression:"date1"}})],1),e._v(" "),a("b-form-group",{staticClass:"col-md-auto",attrs:{label:"Data Final"}},[a("date-picker",{staticClass:"mt-1",attrs:{format:"DD-MM-YYYY",type:"date"},model:{value:e.date2,callback:function(t){e.date2=t},expression:"date2"}})],1),e._v(" "),a("b-form-group",{staticClass:"col-md-auto",attrs:{label:"Intervalo"}},[a("b-select",{attrs:{plain:"",size:"md"},on:{change:e.mountTableBase},model:{value:e.interval,callback:function(t){e.interval=t},expression:"interval"}},[a("b-form-select-option",{attrs:{value:"5"}},[e._v("5 minutos")]),e._v(" "),a("b-form-select-option",{attrs:{value:"10"}},[e._v("10 minutos")]),e._v(" "),a("b-form-select-option",{attrs:{value:"15"}},[e._v("15 minutos")]),e._v(" "),a("b-form-select-option",{attrs:{value:"20"}},[e._v("20 minutos")]),e._v(" "),a("b-form-select-option",{attrs:{value:"25"}},[e._v("25 minutos")]),e._v(" "),a("b-form-select-option",{attrs:{value:"30"}},[e._v("30 minutos")]),e._v(" "),a("b-form-select-option",{attrs:{value:"40"}},[e._v("40 minutos")]),e._v(" "),a("b-form-select-option",{attrs:{value:"50"}},[e._v("50 minutos")]),e._v(" "),a("b-form-select-option",{attrs:{value:"60",selected:""}},[e._v("60 minutos")])],1)],1),e._v(" "),a("b-form-group",{staticClass:"col-md-auto",attrs:{label:"Inicio"}},[a("b-select",{attrs:{plain:"",options:e.time,size:"md"},model:{value:e.time1,callback:function(t){e.time1=t},expression:"time1"}})],1),e._v(" "),a("b-form-group",{staticClass:"col-md-auto",attrs:{label:"Fim"}},[a("b-select",{attrs:{plain:"",options:e.time,size:"md"},model:{value:e.time2,callback:function(t){e.time2=t},expression:"time2"}})],1),e._v(" "),a("b-form-group",{staticClass:"col-md-auto",attrs:{label:"Tempo Mínimo"}},[a("b-input",{attrs:{type:"number"},model:{value:e.minTime,callback:function(t){e.minTime=t},expression:"minTime"}})],1),e._v(" "),a("b-form-group",{staticClass:"col-md-auto",attrs:{label:"Campanhas"}},[a("b-select",{attrs:{plain:"",options:e.queues,size:"md"},model:{value:e.selectedQueue,callback:function(t){e.selectedQueue=t},expression:"selectedQueue"}},[a("b-select-option",{attrs:{value:""}},[e._v("Todas as Campanhas")])],1)],1)],1),e._v(" "),a("hr"),e._v(" "),a("b-form-row",[a("ladda-btn",{staticClass:"btn btn-success",staticStyle:{"z-index":"10"},attrs:{loading:e.loading,"data-style":"expand-left"},nativeOn:{click:function(t){return e.getPerformance.apply(null,arguments)}}},[e._v("Visualizar")])],1)],1)],1),e._v(" "),a("Page",{attrs:{hidden:0==e.table.length}},[a("Table",{attrs:{tableData:e.table,filename:e.filename,tablefooter:e.footer,header:e.header,legend:e.legend}})],1)],1)},o=[],n=a("ade3"),i=(a("d401"),a("99af"),a("14d9"),a("a9e3"),a("b680"),a("d3b7"),a("e25e"),a("ac1f"),a("25f0"),a("3ca3"),a("5319"),a("159b"),a("ddb0"),a("9861"),a("88a7"),a("271a"),a("5494"),a("9973")),r=a("ec45"),m=a("41dc"),d=a("0748"),l=(a("29ac"),a("c1df")),c=a.n(l),u=a("bc3a"),h=a.n(u),b={name:"callperfomance",components:{Page:i["a"],DatePicker:r["default"],Table:d["a"],LaddaBtn:m["a"]},metaInfo:{title:"Relatório - Campanha Desempenho de Chamada"},data:function(){return{date1:c()().toDate(),date2:c()().toDate(),time1:"00:00",time2:"00:00",loading:!1,minTime:20,table:[],tempTaple:[],interval:"60",time:[],footer:[],header:[],legend:[],filename:"",queues:[],selectedQueue:""}},mounted:function(){this.$store.commit("setTitle","Campanha - Desempenho de Chamada"),this.mountTableBase(),this.loadQueues()},methods:{loadQueues:function(){var e=this;h.a.post("".concat(location.origin,"/reportsbackend/queues.php")).then((function(t){e.queues=t.data})).catch((function(e){return console.log(e)}))},updateHeader:function(){this.header=[],this.header.push("<h4>Relatório - Campanha Desempenho de Chamada</h4>"),this.header.push("Período ".concat(c()(this.date1).format("DD/MM/YYYY")," à ").concat(c()(this.date2).format("DD/MM/YYYY")," / Hora à ").concat(this.time1," até ").concat(this.time2)),this.header.push(" "),this.filename="Rel_campanha_performance ".concat(c()().format("DD_MM_YYYY_HH_mm_ss")),this.legend=["<h5>Legenda:</h5>","<b>Recebidas</b> - Ligações recebidas;","<b>Atendidas</b> - Ligações atendidas;","<b>Abandonadas</b> - Ligações abandonadas;","<b>TMR</b> - Tempo médio de retenção;","<b>TMF</b> - Tempo médio de fila;","<b>TMA</b> - Tempo médio de abandono;","<b>Atendidas < tempo segundos</b> - Ligações atendidas menor que o tempo determinado;","<b>Abandonadas < tempo segundos</b> - Ligações atendidas menor que o tempo determinado;","<b>Atendidas > tempo segundos</b> - Ligações atendidas maior que o tempo determinado;","<b>Abandonadas > tempo segundos</b> - Ligações abandonadas maior que o tempo determinado;","<b>Nivel Serviço tempo segundos</b> - Cáculo de ligações ;","<b>Emitido em:</b> ".concat(c()().format("DD/MM/YYYY HH:mm:ss"))]},getPerformance:function(){var e=this;this.table=[];var t=c()(c()(this.date1).format("YYYY-MM-DD")+" "+this.time1),a=c()(c()(this.date1).format("YYYY-MM-DD")+" "+this.time2);if(a.isBefore(t)||a.isSame(t))this.$bvToast.toast("Intervalo de tempo inválido",{title:"Tecnomafer Report",autoHideDelay:5e3,appendToast:!0,toastClass:"bs4-toast bg-danger"});else{this.loading=!0;var s=new URLSearchParams,o={"Content-Type":"multipart/form-data"};s.append("data1",c()(this.date1).format("YYYY-MM-DD")),s.append("data2",c()(this.date2).format("YYYY-MM-DD")),s.append("time1",this.time1.replace(":","-")),s.append("time2",this.time2.replace(":","-")),s.append("selectedQueue",this.selectedQueue),h.a.post("".concat(location.origin,"/reportsbackend/report_campaign_performance.php"),s,o).then((function(t){e.mountTempTable(t.data)})).catch((function(e){return console.log(e)})).finally((function(t){e.loading=!1}))}},mountTableBase:function(){this.time=[],this.time1=this.time2="00:00";var e=c()().startOf("day"),t=c()().endOf("day").subtract(1,"minutes"),a=e;while(a.isBefore(t))this.time.push(a.format("HH:mm")),a=c()(a).add(Number(this.interval),"minutes"),a.isBefore(t)||this.time.push("23:59")},mountTempTable:function(e){this.tempTable=[];var t=c()(c()(this.date1).format("YYYY-MM-DD")+" "+this.time1),a=c()(c()(this.date1).format("YYYY-MM-DD")+" "+this.time2),s=t;while(s.isBefore(a)){var o=s;s=c()(s).add(Number(this.interval),"minutes");var n=s.isBefore(a)?s:a;this.mountTable(o,n,e)}this.table=this.tempTable,this.total()},mountTable:function(e,t,a){var s=this,o=0,i=0,r=0,m=0,d=0,l=0,u=0,h=0,b=0,p=0,f=0,v=0;a.forEach((function(a){var n=s.isBetween(a.Data,e,t);["COMPLETECALLER","COMPLETEAGENT","ABANDON"].includes(a.event)&&n&&o++,["COMPLETECALLER","COMPLETEAGENT"].includes(a.event)&&n&&(i++,r+=parseInt(a.data2),m+=parseInt(a.data1),a.data1<=s.minTime&&b++),["ABANDON","EXITWITHTIMEOUT"].includes(a.event)&&n&&(d++,l+=parseInt(a.data3)),["COMPLETECALLER","COMPLETEAGENT"].includes(a.event)&&n&&(u++,a.data1>s.minTime&&v++),["ABANDON"].includes(a.event)&&n&&(h++,a.data3<=s.minTime?p++:f++)}));var T=(this.valueCheck(u)-this.valueCheck(v))/this.valueCheck(u)*100;this.nívelDeAbandono=this.valueCheck(h/o*100),this.nívelDeAbandono20s=this.valueCheck(f/o*100),this.tempTable.push(Object(n["a"])(Object(n["a"])(Object(n["a"])(Object(n["a"])(Object(n["a"])(Object(n["a"])(Object(n["a"])({"Hora Inicial":e.format("HH:mm"),"Tempo Final":t.format("HH:mm"),Recebidas:o,Atendidas:u,Abandonadas:h,TMR:c()().startOf("day").seconds(r/i).format("HH:mm:ss"),TMF:c()().startOf("day").seconds(m/i).format("HH:mm:ss"),TMA:c()().startOf("day").seconds(l/d).format("HH:mm:ss")},"Atendidas < ".concat(this.minTime,"s"),b),"Abandonadas < ".concat(this.minTime,"s"),p),"Atendidas > ".concat(this.minTime,"s"),v),"Abandonadas > ".concat(this.minTime,"s"),f),"Nivel Serviço ".concat(this.minTime,"s"),"".concat(T?T.toFixed(2):0," %")),"Nível de Abandono","".concat(this.nívelDeAbandono.toFixed(2)," %")),"Nível de Abandono > ".concat(this.minTime,"s"),"".concat(this.nívelDeAbandono20s.toFixed(2)," %"))),this.updateHeader()},valueCheck:function(e){return e||0},isBetween:function(e,t,a){var s=c()(t).format("HH:mm"),o=c()(a,"HH:mm").format("HH:mm"),n=c()(e,"DD-MM-YYYY HH:mm").format("HH:mm"),i=n.toString()>=s.toString()&&n.toString()<=o.toString();return i},total:function(){this.footer=["Total"];var e=0,t=0,a=0,s=0,o=0,n=0,i=0,r=0,m=0,d=0,l=0;this.table.forEach((function(u){var h=String(Object.values(u)[5]),b=String(Object.values(u)[6]),p=String(Object.values(u)[7]);e++,a+="0"!==h?parseInt(c.a.duration(h).asSeconds()):0,s+="0"!==b?parseInt(c.a.duration(b).asSeconds()):0,o+="0"!==p?parseInt(c.a.duration(p).asSeconds()):0,t+=parseInt(Object.values(u)[2]),n+=parseInt(Object.values(u)[3]),i+=parseInt(Object.values(u)[4]),r+=parseInt(Object.values(u)[8]),m+=parseInt(Object.values(u)[9]),d+=parseInt(Object.values(u)[10]),l+=parseInt(Object.values(u)[11])}));var u=o/e,h=a/e,b=s/e;this.footer.push(""),this.footer.push(t),this.footer.push(n),this.footer.push(i),this.footer.push(c()().startOf("day").seconds(h).format("HH:mm:ss")),this.footer.push(c()().startOf("day").seconds(b).format("HH:mm:ss")),this.footer.push(c()().startOf("day").seconds(u).format("HH:mm:ss"));var p=(n-d)/n*100,f=i/t*100,v=l/t*100;this.footer.push(r),this.footer.push(m),this.footer.push(d),this.footer.push(l),this.footer.push((p.toFixed(2)||0)+" %"),this.footer.push(f.toFixed(2)+" %"),this.footer.push(v.toFixed(2)+" %")}}},p=b,f=a("2877"),v=Object(f["a"])(p,s,o,!1,null,null,null);t["default"]=v.exports}}]);
//# sourceMappingURL=chunk-c97e6d7a.e3590c03.js.map