(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-17f87354"],{"06c5":function(t,e,a){"use strict";a.d(e,"a",(function(){return o}));a("d401"),a("a630"),a("fb6a"),a("b0c0"),a("d3b7"),a("ac1f"),a("00b4"),a("25f0"),a("3ca3");var n=a("6b75");function o(t,e){if(t){if("string"==typeof t)return Object(n["a"])(t,e);var a={}.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?Object(n["a"])(t,e):void 0}}},3835:function(t,e,a){"use strict";function n(t){if(Array.isArray(t))return t}a.d(e,"a",(function(){return i}));a("e01a"),a("d28b"),a("14d9"),a("d3b7"),a("3ca3"),a("ddb0");function o(t,e){var a=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=a){var n,o,r,s,i=[],c=!0,l=!1;try{if(r=(a=a.call(t)).next,0===e){if(Object(a)!==a)return;c=!1}else for(;!(c=(n=r.call(a)).done)&&(i.push(n.value),i.length!==e);c=!0);}catch(t){l=!0,o=t}finally{try{if(!c&&null!=a["return"]&&(s=a["return"](),Object(s)!==s))return}finally{if(l)throw o}}return i}}var r=a("06c5");a("d9e2"),a("d401");function s(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function i(t,e){return n(t)||o(t,e)||Object(r["a"])(t,e)||s()}},"6b75":function(t,e,a){"use strict";function n(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,n=Array(e);a<e;a++)n[a]=t[a];return n}a.d(e,"a",(function(){return n}))},f4dd:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Page",[a("b-form",[a("b-form-row",[a("b-form-group",{staticClass:"col-md-auto",attrs:{label:"Data Início"}},[a("date-picker",{staticClass:"mt-1",attrs:{format:"DD-MM-YYYY HH:mm:ss",type:"datetime"},model:{value:t.time1,callback:function(e){t.time1=e},expression:"time1"}})],1),t._v(" "),a("b-form-group",{staticClass:"col-md-auto",attrs:{label:"Data Final"}},[a("date-picker",{staticClass:"mt-1",attrs:{format:"DD-MM-YYYY HH:mm:ss",type:"datetime"},model:{value:t.time2,callback:function(e){t.time2=e},expression:"time2"}})],1),t._v(" "),a("b-form-group",{staticClass:"col-md-auto",attrs:{label:"Agentes"}},[a("b-select",{attrs:{value:"Select state",options:t.agents},model:{value:t.agent,callback:function(e){t.agent=e},expression:"agent"}},[a("b-select-option",{attrs:{value:""}},[t._v("Todos os Agentes")])],1)],1)],1),t._v(" "),a("b-form-row",[a("ladda-btn",{staticClass:"btn btn-success",attrs:{loading:t.loading,id:"showBtn","data-style":"expand-left"},nativeOn:{click:function(e){return t.getLoginPause.apply(null,arguments)}}},[t._v("Visualizar")])],1)],1)],1),t._v(" "),a("Page",{attrs:{hidden:0==t.table.length}},[a("Table",{attrs:{tableData:t.table,filename:t.filename,tablefooter:t.footer,header:t.header,legend:t.legend}})],1)],1)},o=[],r=a("3835"),s=a("6b75");function i(t){if(Array.isArray(t))return Object(s["a"])(t)}a("e01a"),a("d28b"),a("a630"),a("d3b7"),a("3ca3"),a("ddb0");function c(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}var l=a("06c5");a("d9e2"),a("d401");function u(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function d(t){return i(t)||c(t)||Object(l["a"])(t)||u()}a("99af"),a("d81d"),a("14d9"),a("fb6a"),a("a9e3"),a("159b"),a("9861"),a("88a7"),a("271a"),a("5494");var f=a("9973"),m=a("ec45"),b=(a("29ac"),a("c1df")),h=a.n(b),p=a("41dc"),g=a("bc3a"),v=a.n(g),y=a("0748"),Y=a("2ef0"),D=a.n(Y),A={name:"login",components:{Page:f["a"],DatePicker:m["default"],LaddaBtn:p["a"],Table:y["a"]},metaInfo:{title:"Relatório de Login/Pausas por Agente"},data:function(){return{time1:h()().hour(0).minute(0).second(0).toDate(),time2:h()().endOf("day").toDate(),agents:[],agent:"",loading:!1,table:[],footer:[],header:[],legend:[],filename:""}},mounted:function(){this.$store.commit("setTitle","Relatório de Login/Pausas Detalhado por Agente"),this.loadAgents()},methods:{updateHeader:function(){this.header=[],this.header.push("<h4>Relatório de Login/Pausas Detalhado por Agente</h4>"),this.header.push("Período ".concat(h()(this.time1).format("DD/MM/YYYY")," à ").concat(h()(this.time2).format("DD/MM/YYYY")," / Hora à ").concat(h()(this.time1).format("HH:mm:ss")," até ").concat(h()(this.time2).format("HH:mm:ss"))),this.header.push(" "),this.filename="Rel_Login_Pausas ".concat(h()().format("DD_MM_YYYY_HH_mm_ss")),this.legend=["<h5>Legenda:</h5>","<b>Agentes</b> - Nome ou ramal do operador;","<b>Eventos</b> - Tipo de pausas;","<b>Pausas</b> - Detalhes das pausas;","<b>Tempo A</b> - Tempo das pausas;","<b>Emitido em:</b> ".concat(h()().format("DD/MM/YYYY HH:mm:ss"))]},loadAgents:function(){var t=this;v.a.post("".concat(location.origin,"/reportsbackend/agents.php")).then((function(e){t.agents=[],e.data.forEach((function(e){t.agents.push(e.agent)}))})).catch((function(t){return console.log(t)}))},getParams:function(){var t=new URLSearchParams;return t.append("time1",h()(this.time1).format("YYYY-MM-DD HH:mm:ss")),t.append("time2",h()(this.time2).format("YYYY-MM-DD HH:mm:ss")),t.append("agent",this.agent),t},getLoginPause:function(){var t=this;this.loading=!0;var e=this.getParams();v.a.post("".concat(location.origin,"/reportsbackend/report_login.php"),e).then((function(e){t.getAudit(e.data),t.updateHeader()})).catch((function(t){return"opa"+console.log(t)})).finally((function(e){t.loading=!1}))},getAudit:function(t){var e=this,a=this.getParams();v.a.post("".concat(location.origin,"/reportsbackend/report_login_audit.php"),a).then((function(a){0===t.length&&0===a.data.length&&e.$bvToast.toast("Nenhum registro encontrado",{title:"Tecnomafer Report",autoHideDelay:5e3,appendToast:!0,toastClass:"bs4-toast bg-danger"});var n=[].concat(d(t),d(a.data));e.table=D.a.sortBy(n,["Data"],["desc"]),e.footer=["Total"],e.footer.push(n.length),e.footer.push("");var o="00:00:00",s=0;n.forEach((function(t){if(""!==t.Tempo){s++;var e=t.Tempo.split(":").map(Number),a=Object(r["a"])(e,3),n=a[0],i=a[1],c=a[2];o=h.a.duration(o,"hh:mm:ss").add({hours:n,minutes:i,seconds:c})}})),e.footer.push(s);var i="";o.days()>0&&(i+=o.days()+" Dias "),i+=("0"+o.hours()).slice(-2)+":"+("0"+o.minutes()).slice(-2)+":"+("0"+o.seconds()).slice(-2),e.footer.push(i),e.footer.push("")})).catch((function(t){return"opa"+console.log(t)})).finally((function(t){e.loading=!1}))}}},H=A,_=a("2877"),M=Object(_["a"])(H,n,o,!1,null,null,null);e["default"]=M.exports}}]);
//# sourceMappingURL=chunk-17f87354.10456f76.js.map