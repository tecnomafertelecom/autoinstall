{"version":3,"sources":["webpack:///./src/pages/agents/Perfomance.vue?f6c2","webpack:///src/pages/agents/Perfomance.vue","webpack:///./src/pages/agents/Perfomance.vue?7a71","webpack:///./src/pages/agents/Perfomance.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","on","changeTime","model","value","callback","$$v","period","expression","_v","time1","time2","agents","agent","loading","nativeOn","$event","getPerformance","apply","arguments","table","length","fileName","header","footer","legend","staticRenderFns","name","components","Page","DatePicker","LaddaBtn","Table","metaInfo","title","data","moment","hour","minute","second","toDate","entry","queueLog","totalPause","mounted","$store","commit","loadAgents","methods","updateHeader","push","concat","format","add","_process$env$VUE_APP_","_this","axios","post","process","location","origin","then","text","forEach","x","id","catch","err","console","log","_process$env$VUE_APP_2","_process$env$VUE_APP_3","_process$env$VUE_APP_4","_this2","params","URLSearchParams","append","join","$bvToast","toast","autoHideDelay","appendToast","toastClass","mountTable","finally","formatTime","secTemp","sec","toFixed","hours","Math","floor","minutes","seconds","_this3","tempTable","status","find","y","callid","finalStatus","event","Agente","duration","parseInt","Duration","durationWait","DurationWait","durationPause","total","_","chain","groupBy","map","array","key","TTC","sumBy","TMC","TME","reduce","counter","obj","totalTTC","totalTMC","totalTME","encUse","encOper","totalLogin","sumTotalHour","String","Object","values","time","totalSplit","split","timeSplit","totalHour","totalMinutes","totalSeconds","timeHour","timeMinutes","timeSeconds","component"],"mappings":"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","file":"js/chunk-2d213a40.832de44f.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('Page',[_c('b-form',[_c('b-form-row',[_c('b-form-group',{staticClass:\"col-md-auto\",attrs:{\"label\":\"Data Início\"}},[_c('b-select',{attrs:{\"plain\":\"\",\"size\":\"md\"},on:{\"change\":_vm.changeTime},model:{value:(_vm.period),callback:function ($$v) {_vm.period=$$v},expression:\"period\"}},[_c('b-form-select-option',{attrs:{\"value\":''}},[_vm._v(\"Atual\")]),_vm._v(\" \"),_c('b-form-select-option',{attrs:{\"value\":'7'}},[_vm._v(\"7 dias\")]),_vm._v(\" \"),_c('b-form-select-option',{attrs:{\"value\":'15'}},[_vm._v(\"15 dias\")]),_vm._v(\" \"),_c('b-form-select-option',{attrs:{\"value\":'30'}},[_vm._v(\"30 dias\")]),_vm._v(\" \"),_c('b-form-select-option',{attrs:{\"value\":'60'}},[_vm._v(\"60 dias\")])],1)],1),_vm._v(\" \"),_c('b-form-group',{staticClass:\"col-md-auto\",attrs:{\"label\":\"Data Início\"}},[_c('date-picker',{staticClass:\"mt-1\",attrs:{\"format\":\"DD-MM-YYYY HH:mm:ss\",\"type\":\"datetime\"},model:{value:(_vm.time1),callback:function ($$v) {_vm.time1=$$v},expression:\"time1\"}})],1),_vm._v(\" \"),_c('b-form-group',{staticClass:\"col-md-auto\",attrs:{\"label\":\"Data Final\"}},[_c('date-picker',{staticClass:\"mt-1\",attrs:{\"format\":\"DD-MM-YYYY HH:mm:ss\",\"type\":\"datetime\"},model:{value:(_vm.time2),callback:function ($$v) {_vm.time2=$$v},expression:\"time2\"}})],1),_vm._v(\" \"),_c('b-form-group',{staticClass:\"col-md-auto\",attrs:{\"label\":\"Agentes\"}},[_c('b-select',{attrs:{\"plain\":\"\",\"multiple\":\"\",\"options\":_vm.agents,\"size\":\"md\"},model:{value:(_vm.agent),callback:function ($$v) {_vm.agent=$$v},expression:\"agent\"}})],1)],1),_vm._v(\" \"),_c('b-form-row',[_c('ladda-btn',{staticClass:\"btn btn-success\",attrs:{\"loading\":_vm.loading,\"data-style\":\"expand-left\"},nativeOn:{\"click\":function($event){return _vm.getPerformance.apply(null, arguments)}}},[_vm._v(\"Visualizar\")])],1)],1)],1),_vm._v(\" \"),_c('Page',{attrs:{\"hidden\":_vm.table.length == 0}},[_c('Table',{attrs:{\"tableData\":_vm.table,\"filename\":_vm.fileName,\"header\":_vm.header,\"tablefooter\":_vm.footer,\"legend\":_vm.legend}})],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <Page>\n      <b-form>\n        <b-form-row>\n          <b-form-group label=\"Data Início\" class=\"col-md-auto\">\n            <b-select plain size=\"md\" v-model=\"period\" @change=\"changeTime\">\n              <b-form-select-option :value=\"''\">Atual</b-form-select-option>\n              <b-form-select-option :value=\"'7'\">7 dias</b-form-select-option>\n              <b-form-select-option :value=\"'15'\">15 dias</b-form-select-option>\n              <b-form-select-option :value=\"'30'\">30 dias</b-form-select-option>\n              <b-form-select-option :value=\"'60'\">60 dias</b-form-select-option>\n            </b-select>\n          </b-form-group>\n          <b-form-group label=\"Data Início\" class=\"col-md-auto\">\n            <date-picker\n              v-model=\"time1\"\n              format=\"DD-MM-YYYY HH:mm:ss\"\n              class=\"mt-1\"\n              type=\"datetime\"\n            ></date-picker>\n          </b-form-group>\n          <b-form-group label=\"Data Final\" class=\"col-md-auto\">\n            <date-picker\n              v-model=\"time2\"\n              format=\"DD-MM-YYYY HH:mm:ss\"\n              class=\"mt-1\"\n              type=\"datetime\"\n            ></date-picker>\n          </b-form-group>\n\n          <b-form-group label=\"Agentes\" class=\"col-md-auto\">\n            <b-select\n              plain\n              multiple\n              v-model=\"agent\"\n              :options=\"agents\"\n              size=\"md\"\n            />\n          </b-form-group>\n        </b-form-row>\n        <b-form-row>\n          <ladda-btn\n            :loading=\"loading\"\n            data-style=\"expand-left\"\n            class=\"btn btn-success\"\n            @click.native=\"getPerformance\"\n            >Visualizar</ladda-btn\n          >\n        </b-form-row>\n      </b-form>\n    </Page>\n    <Page :hidden=\"table.length == 0\">\n      <Table :tableData=\"table\" :filename=\"fileName\" :header=\"header\" :tablefooter=\"footer\" :legend=\"legend\"/>\n    </Page>\n  </div>\n</template>\n<script>\nimport Page from '@/components/Page'\nimport Table from '@/components/Table'\nimport LaddaBtn from '@/vendor/libs/ladda/Ladda'\nimport '@/vendor/libs/vue2-datepicker/locale/pt-br'\nimport DatePicker from 'vue2-datepicker'\nimport moment from 'moment'\nimport _ from 'lodash'\nimport axios from 'axios'\nexport default {\n  name: 'perfomance',\n  components: {\n    Page,\n    DatePicker,\n    LaddaBtn,\n    Table\n  },\n  metaInfo: {\n    title: 'Relatório Desempenho de Agente'\n  },\n  data: () => ({\n    time1: moment().hour(0).minute(0).second(0).toDate(),\n    time2: moment().hour(23).minute(59).second(59).toDate(),\n    period: '',\n    agents: [],\n    agent: [],\n    entry: '',\n    queueLog: '',\n    table: [],\n    loading: false,\n    header: [],\n    legend: [],\n    fileName: '',\n    totalPause: [],\n    footer: []\n  }),\n  mounted () {\n    this.$store.commit('setTitle', 'Relatório Desempenho de Agente')\n    this.loadAgents()\n  },\n  methods: {\n    updateHeader () {\n      this.header = []\n      this.header.push('<h4>Relatório Desempenho de Agente</h4>')\n      this.header.push(`Período ${moment(this.time1).format('DD/MM/YYYY')} à ${moment(this.time2).format('DD/MM/YYYY')} / Hora à ${moment(this.time1).format('HH:mm:ss')} até ${moment(this.time2).format('HH:mm:ss')}`)\n      this.header.push(' ')\n      this.fileName = `Rel_agente_desempenho ${moment().format('DD_MM_YYYY_HH_mm_ss')}`\n\n      this.legend = ['<h5>Legenda:</h5>',\n        '<b>TTC</b> - Tempo total de chamada;',\n        '<b>TMC</b> - Tempo médio de chamada;',\n        '<b>TME</b> - tempo médio de espera;',\n        '<b>Enc User</b> - Finalizadas pelo cliente;',\n        '<b>Enc Oper</b> - Finalizadas pelo operador;',\n        '<b>Tempo Login</b> - Tempo total de login do operador;',\n        '<b>Tempo Pausa</b> - Tempo total de pausas do operador;',\n        `<b>Emitido em:</b> ${moment().format('DD/MM/YYYY HH:mm:ss')}`]\n    },\n    changeTime: function () {\n      this.time1 =\n        this.period === ''\n          ? moment().hour(0).minute(0).second(0).toDate()\n          : moment()\n            .add(this.period * -1, 'd')\n            .hour(0).minute(0).second(0).toDate()\n      this.time2 = moment().hour(23).minute(59).second(59).toDate()\n    },\n    loadAgents: function () {\n      axios\n        .post(\n          `${process.env.VUE_APP_ROOT_API ??\n            location.origin}/reportsbackend/agents_callcenter.php`\n        )\n        .then(data => {\n          this.agents = [\n            {\n              text: 'Todos',\n              value: ''\n            }\n          ]\n          data.data.forEach(x => {\n            this.agents.push({\n              text: x.name,\n              value: x.id\n            })\n          })\n        })\n        .catch(err => console.log(err))\n    },\n    getPerformance () {\n      this.loading = true\n      this.table = []\n\n      const params = new URLSearchParams()\n      params.append('time1', moment(this.time1).format('YYYY-MM-DD HH:mm:ss'))\n      params.append('time2', moment(this.time2).format('YYYY-MM-DD HH:mm:ss'))\n      params.append('agent', this.agent.join(','))\n      axios\n        .post(\n          `${process.env.VUE_APP_ROOT_API ??\n            location.origin}/reportsbackend/report_perfomance_queue_log.php`,\n          params\n        )\n        .then(data => {\n          this.queueLog = data.data\n        })\n        .catch(err => console.log(err))\n\n      axios\n        .post(\n          `${process.env.VUE_APP_ROOT_API ??\n            location.origin}/reportsbackend/report_total_pause_agents.php`,\n          params\n        )\n        .then(data => {\n          this.totalPause = data.data\n        })\n        .catch(err => console.log(err))\n\n      axios\n        .post(\n          `${process.env.VUE_APP_ROOT_API ??\n            location.origin}/reportsbackend/report_perfomance_call_entry.php`,\n          params\n        )\n        .then(data => {\n          if (data.data.length === 0) {\n            this.$bvToast.toast('Nenhum registro encontrado', {\n              title: 'Tecnomafer Report',\n              autoHideDelay: 5000,\n              appendToast: true,\n              toastClass: 'bs4-toast bg-danger'\n            })\n          }\n          this.entry = data.data\n          this.mountTable()\n          this.updateHeader()\n        })\n        .catch(err => console.log(err))\n        .finally(x => {\n          this.loading = false\n        })\n    },\n    formatTime (secTemp) {\n      const sec = secTemp.toFixed(0)\n      let hours = Math.floor(sec / 3600)\n      let minutes = Math.floor((sec - (hours * 3600)) / 60)\n      let seconds = sec - (hours * 3600) - (minutes * 60)\n      if (hours < 10) { hours = '0' + hours }\n      if (minutes < 10) { minutes = '0' + minutes }\n      if (seconds < 10) { seconds = '0' + seconds }\n      return hours + ':' + minutes + ':' + seconds\n    },\n    mountTable () {\n      const tempTable = []\n      this.entry.forEach(x => {\n        const status = this.queueLog.find(y => y.callid === x.id)\n        const finalStatus = status ? status.event : 'COMPLETEAGENT'\n\n        tempTable.push({\n          agent: x.Agente,\n          id: x.id,\n          duration: parseInt(x.Duration),\n          durationWait: parseInt(x.DurationWait),\n          durationPause: 0,\n          status: finalStatus\n        })\n      })\n\n      this.totalPause.forEach(x => {\n        tempTable.push({\n          agent: x.Agente,\n          id: x.total + 100,\n          duration: 0,\n          durationWait: 0,\n          durationPause: parseInt(x.total),\n          status: 'Pausa'\n        })\n      })\n\n      this.table = _.chain(tempTable)\n        .groupBy('agent')\n        .map((array, key) => ({\n          Agente: key,\n          TTC: this.formatTime(_.sumBy(array, 'duration')),\n          TMC: this.formatTime(((_.sumBy(array, 'duration') / tempTable.length))),\n          TME: this.formatTime((_.sumBy(array, 'durationWait') / tempTable.length)),\n          'Enc User': tempTable.reduce((counter, obj) => {\n            if (obj.status === 'COMPLETECALLER' && obj.agent === key) {\n              counter += 1\n            }\n            return counter\n          }, 0),\n          'Enc Oper': tempTable.reduce((counter, obj) => {\n            if (obj.status === 'COMPLETEAGENT' && obj.agent === key) {\n              counter += 1\n            }\n            return counter\n          }, 0),\n          'Tempo Login':\n          this.formatTime((_.sumBy(array, 'durationWait') + _.sumBy(array, 'duration') + _.sumBy(array, 'durationPause'))),\n          'Tempo Pausa':\n          this.formatTime(_.sumBy(array, 'durationPause'))\n        }))\n        .value()\n\n      let totalTTC = '00:00:00'\n      let totalTMC = '00:00:00'\n      let totalTME = '00:00:00'\n      let encUse = 0\n      let encOper = 0\n      let totalLogin = '00:00:00'\n      let totalPause = '00:00:00'\n\n      this.table.forEach(x => {\n        totalTTC = this.sumTotalHour(totalTTC, String(Object.values(x)[1]))\n        totalTMC = this.sumTotalHour(totalTMC, String(Object.values(x)[2]))\n        totalTME = this.sumTotalHour(totalTME, String(Object.values(x)[3]))\n\n        encUse += parseInt(Object.values(x)[4])\n        encOper += parseInt(Object.values(x)[5])\n\n        totalLogin = this.sumTotalHour(totalLogin, String(Object.values(x)[6]))\n        totalPause = this.sumTotalHour(totalPause, String(Object.values(x)[7]))\n      })\n      this.footer = []\n      this.footer.push('Total')\n      this.footer.push(totalTTC)\n      this.footer.push(totalTMC)\n      this.footer.push(totalTME)\n      this.footer.push(encUse)\n      this.footer.push(encOper)\n      this.footer.push(totalLogin)\n      this.footer.push(totalPause)\n    },\n    sumTotalHour (total, time) {\n      const totalSplit = total.split(':')\n      const timeSplit = time.split(':')\n\n      const totalHour = parseInt(totalSplit[0])\n      const totalMinutes = parseInt(totalSplit[1])\n      const totalSeconds = parseInt(totalSplit[2])\n\n      const timeHour = parseInt(timeSplit[0])\n      const timeMinutes = parseInt(timeSplit[1])\n      const timeSeconds = parseInt(timeSplit[2])\n\n      const hours = ((totalHour + timeHour) * 60) * 60\n      const minutes = (totalMinutes + timeMinutes) * 60\n      const seconds = (totalSeconds + timeSeconds)\n      return this.formatTime(hours + minutes + seconds)\n    }\n  }\n}\n</script>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Perfomance.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Perfomance.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./Perfomance.vue?vue&type=template&id=5e4357d8\"\nimport script from \"./Perfomance.vue?vue&type=script&lang=js\"\nexport * from \"./Perfomance.vue?vue&type=script&lang=js\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}