(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-186b3952"],{5530:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));a("4de4"),a("14d9"),a("1d1c"),a("7a82"),a("e439"),a("dbb4"),a("d3b7"),a("159b");var n=a("ade3");function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function r(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){Object(n["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}},ade3:function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));a("7a82");var n=a("a38e");function o(e,t,a){return(t=Object(n["a"])(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}},eff5:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("Page",[a("b-form",[a("b-form-row",[a("b-form-group",{staticClass:"col-md-auto",attrs:{label:"Data Início"}},[a("date-picker",{staticClass:"mt-1",attrs:{format:"DD-MM-YYYY HH:mm:ss",type:"datetime"},model:{value:e.time1,callback:function(t){e.time1=t},expression:"time1"}})],1),e._v(" "),a("b-form-group",{staticClass:"col-md-auto",attrs:{label:"Data Final"}},[a("date-picker",{staticClass:"mt-1",attrs:{format:"DD-MM-YYYY HH:mm:ss",type:"datetime"},model:{value:e.time2,callback:function(t){e.time2=t},expression:"time2"}})],1),e._v(" "),a("b-form-group",{staticClass:"col-md-auto",attrs:{label:"Agentes"}},[a("b-select",{attrs:{plains:"",multiple:"",options:e.agents},model:{value:e.agent,callback:function(t){e.agent=t},expression:"agent"}})],1),e._v(" "),a("b-form-group",{staticClass:"col-md-auto",attrs:{label:"Pausas"}},[a("b-select",{attrs:{plains:"",multiple:"",value:"Select state",options:e.breaks},model:{value:e.breakValue,callback:function(t){e.breakValue=t},expression:"breakValue"}})],1)],1),e._v(" "),a("b-form-row",[a("ladda-btn",{staticClass:"btn btn-success",attrs:{loading:e.loading,id:"showBtn","data-style":"expand-left"},nativeOn:{click:function(t){return e.getLoginPause.apply(null,arguments)}}},[e._v("Visualizar")])],1)],1)],1),e._v(" "),a("Page",{attrs:{hidden:0==e.table.length}},[a("Table",{attrs:{tableData:e.table,filename:e.filename,header:e.header,tableheader:e.tableHeader,small:!0}})],1)],1)},o=[],r=a("ade3"),s=a("5530"),i=(a("e01a"),a("99af"),a("4de4"),a("7db0"),a("a15b"),a("14d9"),a("b0c0"),a("d3b7"),a("e25e"),a("3ca3"),a("159b"),a("ddb0"),a("9861"),a("88a7"),a("271a"),a("5494"),a("9973")),l=a("ec45"),c=(a("29ac"),a("c1df")),u=a.n(c),d=a("41dc"),b=a("bc3a"),m=a.n(b),h=a("0748"),f={name:"login",components:{Page:i["a"],DatePicker:l["default"],LaddaBtn:d["a"],Table:h["a"]},metaInfo:{title:"Relatório de Login/Pausas"},data:function(){return{time1:u()().hour(0).minute(0).second(0).toDate(),time2:u()().hour(23).minute(59).second(59).toDate(),agents:[],agent:[],breaks:[],breakValue:[],loading:!1,table:[],header:[],legend:[],filename:"",tableHeader:[]}},mounted:function(){this.$store.commit("setTitle","Relatório de Login/Pausas"),this.loadAgents(),this.loadBreaks()},methods:{updateHeader:function(){if(this.header=[],this.header.push("<h4>Relatório de Login/Pausas por Agente</h4>"),this.header.push("Período ".concat(u()(this.time1).format("DD/MM/YYYY")," à ").concat(u()(this.time2).format("DD/MM/YYYY")," / Hora à ").concat(u()(this.time1).format("HH:mm:ss")," até ").concat(u()(this.time2).format("HH:mm:ss"))),this.header.push(" "),this.tableHeader.length>0){var e="<table><tr>";this.tableHeader.forEach((function(t){e+="Agente"===t?"<td style='background-color:#92a8d1'>":"<td colspan='3' style='background-color:#92a8d1'>",e+=t,e+="</td>"})),e+="</tr></table>",this.header.push(e)}this.filename="Rel_Login_Pausas ".concat(u()().format("DD_MM_YYYY_HH_mm_ss")),this.legend=["<h5>Legenda:</h5>","<b>Agentes</b> - Nome ou ramal do operador;","<b>Eventos</b> - Tipo de pausas;","<b>Pausas</b> - Detalhes das pausas;","<b>Tempo A</b> - Tempo das pausas;","<b>Emitido em:</b> ".concat(u()().format("DD/MM/YYYY HH:mm:ss"))]},loadAgents:function(){var e,t=this;m.a.post("".concat(null!==(e="https://177.45.80.177:38778")&&void 0!==e?e:location.origin,"/reportsbackend/agents_callcenter.php")).then((function(e){t.agents=[],t.agents=[{text:"Todos",value:""}],e.data.forEach((function(e){t.agents.push({text:e.name,value:e.id})}))})).catch((function(e){return console.log(e)}))},loadBreaks:function(){var e,t=this;m.a.post("".concat(null!==(e="https://177.45.80.177:38778")&&void 0!==e?e:location.origin,"/reportsbackend/breaks.php")).then((function(e){t.breaks=[],t.breaks=[{text:"Todos",value:""}],e.data.forEach((function(e){t.breaks.push({text:e.description,value:e.id})}))})).catch((function(e){return console.log(e)}))},getParams:function(){var e=new URLSearchParams;return e.append("time1",u()(this.time1).format("YYYY-MM-DD HH:mm:ss")),e.append("time2",u()(this.time2).format("YYYY-MM-DD HH:mm:ss")),e.append("agent",this.agent.join(",")),e.append("breaks",this.breakValue.join(",")),e},getLoginPause:function(){var e,t=this;if(this.loading=!0,this.breakValue.includes("",0)&&this.breakValue.length>1)return this.$bvToast.toast("Parametros de Pausas Inválidos",{title:"Tecnomafer Report",autoHideDelay:5e3,appendToast:!0,toastClass:"bs4-toast bg-danger"}),void(this.loading=!1);var a=this.getParams();m.a.post("".concat(null!==(e="https://177.45.80.177:38778")&&void 0!==e?e:location.origin,"/reportsbackend/report_login_detailed.php"),a).then((function(e){0===e.data.length&&t.$bvToast.toast("Nenhum registro encontrado",{title:"Tecnomafer Report",autoHideDelay:5e3,appendToast:!0,toastClass:"bs4-toast bg-danger"}),t.mountTable(e.data),t.updateHeader()})).catch((function(e){return"opa"+console.log(e)})).finally((function(e){t.loading=!1}))},mountTable:function(e){var t=this;this.tableHeader=[],this.tableHeader.push("Agente"),this.tableHeader.push("Login"),0===this.breakValue.length||this.breakValue.includes("",0)?this.breaks.forEach((function(e){"Todos"!==e.text&&t.tableHeader.push(e.text)})):this.breakValue.forEach((function(e){t.tableHeader.push(t.breaks.find((function(t){return t.value===e})).text)}));var a=[],n={};this.agents.forEach((function(o){var i=e.filter((function(e){return"Login"===e.Pausa&&parseInt(e.AgenteId)===parseInt(o.value)}));i&&i.forEach((function(i){n=Object(s["a"])(Object(s["a"])({},n),{},{Nome:i.Agente,Primeiro:i.Primeiro,Ultimo:i.Ultimo,"Duração":u()().startOf("day").seconds(i.Duracao).format("HH:mm:ss")});for(var l=function(a){var l=e.filter((function(e){return String(e.Data)===String(i.Data)&&e.Pausa===t.tableHeader[a]&&parseInt(e.AgenteId)===parseInt(o.value)})).shift();n=Object(s["a"])(Object(s["a"])({},n),{},Object(r["a"])(Object(r["a"])(Object(r["a"])({},"Primeiro "+t.tableHeader[a],l?l.Primeiro:"-"),"Último "+t.tableHeader[a],l?l.Ultimo:"-"),"Duração "+t.tableHeader[a],l?u()().startOf("day").seconds(l.Duracao).format("HH:mm:ss"):"-"))},c=2;c<t.tableHeader.length;c++)l(c);a.push(n)}))})),this.table=a}}},p=f,g=a("2877"),v=Object(g["a"])(p,n,o,!1,null,null,null);t["default"]=v.exports}}]);
//# sourceMappingURL=chunk-186b3952.e459b30a.js.map