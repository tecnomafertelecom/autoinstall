{"version":3,"sources":["webpack:///./src/pages/campaign/Detailed.vue?6fe9","webpack:///src/pages/campaign/Detailed.vue","webpack:///./src/pages/campaign/Detailed.vue?ece5","webpack:///./src/pages/campaign/Detailed.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","model","value","callback","$$v","datetime1","expression","_v","datetime2","queues","queue","agents","agent","staticStyle","loading","nativeOn","$event","getCampaingDetailed","apply","arguments","table","length","filename","header","legend","staticRenderFns","name","components","Page","DatePicker","LaddaBtn","Table","metaInfo","title","data","moment","hour","minute","second","toDate","mounted","$store","commit","loadQueues","loadAgents","methods","updateHeader","push","concat","format","_process$env$VUE_APP_","_this","axios","post","process","location","origin","then","catch","err","console","log","_process$env$VUE_APP_2","_this2","forEach","x","_process$env$VUE_APP_3","_this3","params","URLSearchParams","append","$bvToast","toast","autoHideDelay","appendToast","toastClass","campaignText","find","y","Campanha","text","finally","component"],"mappings":"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","file":"js/chunk-2d21dbab.0e076273.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('Page',[_c('b-form',[_c('b-form-row',[_c('b-form-group',{staticClass:\"col-md-auto\",attrs:{\"label\":\"Data Início\"}},[_c('date-picker',{staticClass:\"mt-1\",attrs:{\"format\":\"DD-MM-YYYY HH:mm:ss\",\"type\":\"datetime\"},model:{value:(_vm.datetime1),callback:function ($$v) {_vm.datetime1=$$v},expression:\"datetime1\"}})],1),_vm._v(\" \"),_c('b-form-group',{staticClass:\"col-md-auto\",attrs:{\"label\":\"Data Final\"}},[_c('date-picker',{staticClass:\"mt-1\",attrs:{\"format\":\"DD-MM-YYYY HH:mm:ss\",\"type\":\"datetime\"},model:{value:(_vm.datetime2),callback:function ($$v) {_vm.datetime2=$$v},expression:\"datetime2\"}})],1),_vm._v(\" \"),_c('b-form-group',{staticClass:\"col-md-auto\",attrs:{\"label\":\"Campanhas\"}},[_c('b-select',{attrs:{\"plain\":\"\",\"options\":_vm.queues,\"size\":\"md\"},model:{value:(_vm.queue),callback:function ($$v) {_vm.queue=$$v},expression:\"queue\"}},[_c('b-select-option',{attrs:{\"value\":\"\"}},[_vm._v(\"Todas as Campanhas\")])],1)],1),_vm._v(\" \"),_c('b-form-group',{staticClass:\"col-md-auto\",attrs:{\"label\":\"Agentes\"}},[_c('b-select',{attrs:{\"value\":\"Select state\",\"options\":_vm.agents},model:{value:(_vm.agent),callback:function ($$v) {_vm.agent=$$v},expression:\"agent\"}},[_c('b-select-option',{attrs:{\"value\":\"\"}},[_vm._v(\"Todos os Agentes\")])],1)],1)],1),_vm._v(\" \"),_c('hr'),_vm._v(\" \"),_c('b-form-row',[_c('ladda-btn',{staticClass:\"btn btn-success\",staticStyle:{\"z-index\":\"10\"},attrs:{\"loading\":_vm.loading,\"data-style\":\"expand-left\"},nativeOn:{\"click\":function($event){return _vm.getCampaingDetailed.apply(null, arguments)}}},[_vm._v(\"Visualizar\")])],1)],1)],1),_vm._v(\" \"),_c('Page',{attrs:{\"hidden\":_vm.table.length == 0}},[_c('Table',{attrs:{\"tableData\":_vm.table,\"filename\":_vm.filename,\"header\":_vm.header,\"legend\":_vm.legend}})],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <Page>\n      <b-form>\n        <b-form-row>\n          <b-form-group label=\"Data Início\" class=\"col-md-auto\">\n            <date-picker\n              v-model=\"datetime1\"\n              format=\"DD-MM-YYYY HH:mm:ss\"\n              class=\"mt-1\"\n              type=\"datetime\"\n            ></date-picker>\n          </b-form-group>\n          <b-form-group label=\"Data Final\" class=\"col-md-auto\">\n            <date-picker\n              v-model=\"datetime2\"\n              format=\"DD-MM-YYYY HH:mm:ss\"\n              class=\"mt-1\"\n              type=\"datetime\"\n            ></date-picker>\n          </b-form-group>\n          <b-form-group label=\"Campanhas\" class=\"col-md-auto\">\n            <b-select plain v-model=\"queue\" :options=\"queues\" size=\"md\">\n              <b-select-option value=\"\">Todas as Campanhas</b-select-option>\n            </b-select>\n          </b-form-group>\n          <b-form-group label=\"Agentes\" class=\"col-md-auto\">\n            <b-select value=\"Select state\" :options=\"agents\" v-model=\"agent\">\n            <b-select-option value=\"\">Todos os Agentes</b-select-option>\n            </b-select>\n          </b-form-group>\n        </b-form-row>\n        <hr />\n        <b-form-row>\n          <ladda-btn\n            :loading=\"loading\"\n            data-style=\"expand-left\"\n            class=\"btn btn-success\"\n            @click.native=\"getCampaingDetailed\"\n            style=\"z-index: 10;\"\n            >Visualizar</ladda-btn\n          >\n        </b-form-row>\n      </b-form>\n    </Page>\n    <Page :hidden=\"table.length == 0\">\n      <Table :tableData=\"table\" :filename=\"filename\" :header=\"header\" :legend=\"legend\" />\n    </Page>\n  </div>\n</template>\n<script>\nimport Page from '@/components/Page'\nimport DatePicker from 'vue2-datepicker'\nimport '@/vendor/libs/vue2-datepicker/locale/pt-br'\nimport moment from 'moment'\nimport LaddaBtn from '@/vendor/libs/ladda/Ladda'\nimport axios from 'axios'\nimport Table from '@/components/Table'\n\nexport default {\n  name: 'detailed',\n  components: {\n    Page,\n    DatePicker,\n    LaddaBtn,\n    Table\n  },\n  metaInfo: {\n    title: 'Relatório de Campanha Detalhado'\n  },\n  data: () => ({\n    datetime1: moment().hour(0).minute(0).second(0).toDate(),\n    datetime2: moment().hour(23).minute(59).second(59).toDate(),\n    agents: [],\n    agent: '',\n    queues: [],\n    queue: '',\n    table: [],\n    loading: false,\n    filename: '',\n    header: [],\n    legend: []\n  }),\n  mounted () {\n    this.$store.commit('setTitle', 'Relatório de Campanha Detalhado')\n    this.loadQueues()\n    this.loadAgents()\n  },\n  methods: {\n    updateHeader () {\n      this.header = []\n      this.header.push('<h4>Relatório de Campanha Detalhado</h4>')\n      this.header.push(`Período ${moment(this.datetime1).format('DD/MM/YYYY')} à ${moment(this.datetime2).format('DD/MM/YYYY')} / Hora à ${moment(this.datetime1).format('HH:mm:ss')} até ${moment(this.datetime2).format('HH:mm:ss')}`)\n      this.header.push(' ')\n      this.filename = `Rel_campanha_detalhado ${moment().format('DD_MM_YYYY_HH_mm_ss')}`\n\n      this.legend = ['<h5>Legenda:</h5>',\n        '<b>Origem</b> - Origem da chamada;',\n        '<b>Campanha</b> - Campanha criada;',\n        '<b>Telefone</b> - Identificador de chamada;',\n        '<b>Tempo de Espera</b> - Tempo na fila;',\n        '<b>Tempo de Atendimento</b> - Chamada em curso;',\n        '<b>Finalizados Por</b> - Finalizadas pelo operador ou usuário;',\n        `<b>Emitido em:</b> ${moment().format('DD/MM/YYYY HH:mm:ss')}`]\n    },\n    loadQueues: function () {\n      axios\n        .post(\n          `${process.env.VUE_APP_ROOT_API ??\n            location.origin}/reportsbackend/queues.php`\n        )\n        .then(data => {\n          this.queues = data.data\n        })\n        .catch(err => console.log(err))\n    },\n    loadAgents: function () {\n      axios.post(`${process.env.VUE_APP_ROOT_API ?? location.origin}/reportsbackend/agents.php`).then(data => {\n        this.agents = []\n\n        data.data.forEach((x) => {\n          this.agents.push(x.agent)\n        })\n      }\n      ).catch(err => console.log(err))\n    },\n    getCampaingDetailed: function () {\n      this.loading = true\n      this.table = []\n\n      const params = new URLSearchParams()\n      params.append(\n        'time1',\n        moment(this.datetime1).format('YYYY-MM-DD HH:mm:ss')\n      )\n      params.append(\n        'time2',\n        moment(this.datetime2).format('YYYY-MM-DD HH:mm:ss')\n      )\n      params.append('queue', this.queue)\n      params.append('agent', this.agent)\n\n      axios\n        .post(\n          `${process.env.VUE_APP_ROOT_API ??\n            location.origin}/reportsbackend/report_campaing_detail.php`,\n          params\n        )\n        .then(data => {\n          if (data.data) {\n            if (data.data.length === 0) {\n              this.$bvToast.toast('Nenhum registro encontrado', {\n                title: 'Tecnomafer Report',\n                autoHideDelay: 5000,\n                appendToast: true,\n                toastClass: 'bs4-toast bg-danger'\n              })\n            }\n\n            data.data.forEach(x => {\n              const campaignText = this.queues.find(y => y.value === x.Campanha)\n              if (campaignText) {\n                x.Campanha = campaignText.text\n              }\n            })\n          }\n          this.table = data.data\n          this.updateHeader()\n        })\n        .catch(err => console.log(err))\n        .finally(x => {\n          this.loading = false\n        })\n    }\n  }\n}\n</script>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Detailed.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Detailed.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./Detailed.vue?vue&type=template&id=1e106182\"\nimport script from \"./Detailed.vue?vue&type=script&lang=js\"\nexport * from \"./Detailed.vue?vue&type=script&lang=js\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}