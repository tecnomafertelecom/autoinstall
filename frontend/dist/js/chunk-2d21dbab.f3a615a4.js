(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d21dbab"],{d317:function(a,t,e){"use strict";e.r(t);var n=function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("div",[e("Page",[e("b-form",[e("b-form-row",[e("b-form-group",{staticClass:"col-md-auto",attrs:{label:"Data Início"}},[e("date-picker",{staticClass:"mt-1",attrs:{format:"DD-MM-YYYY HH:mm:ss",type:"datetime"},model:{value:a.datetime1,callback:function(t){a.datetime1=t},expression:"datetime1"}})],1),a._v(" "),e("b-form-group",{staticClass:"col-md-auto",attrs:{label:"Data Final"}},[e("date-picker",{staticClass:"mt-1",attrs:{format:"DD-MM-YYYY HH:mm:ss",type:"datetime"},model:{value:a.datetime2,callback:function(t){a.datetime2=t},expression:"datetime2"}})],1),a._v(" "),e("b-form-group",{staticClass:"col-md-auto",attrs:{label:"Campanhas"}},[e("b-select",{attrs:{plain:"",options:a.queues,size:"md"},model:{value:a.queue,callback:function(t){a.queue=t},expression:"queue"}},[e("b-select-option",{attrs:{value:""}},[a._v("Todas as Campanhas")])],1)],1),a._v(" "),e("b-form-group",{staticClass:"col-md-auto",attrs:{label:"Agentes"}},[e("b-select",{attrs:{value:"Select state",options:a.agents},model:{value:a.agent,callback:function(t){a.agent=t},expression:"agent"}},[e("b-select-option",{attrs:{value:""}},[a._v("Todos os Agentes")])],1)],1)],1),a._v(" "),e("hr"),a._v(" "),e("b-form-row",[e("ladda-btn",{staticClass:"btn btn-success",staticStyle:{"z-index":"10"},attrs:{loading:a.loading,"data-style":"expand-left"},nativeOn:{click:function(t){return a.getCampaingDetailed.apply(null,arguments)}}},[a._v("Visualizar")])],1)],1)],1),a._v(" "),e("Page",{attrs:{hidden:0==a.table.length}},[e("Table",{attrs:{tableData:a.table,filename:a.filename,header:a.header,legend:a.legend}})],1)],1)},o=[],s=(e("99af"),e("7db0"),e("14d9"),e("d3b7"),e("3ca3"),e("159b"),e("ddb0"),e("9861"),e("88a7"),e("271a"),e("5494"),e("9973")),i=e("ec45"),d=(e("29ac"),e("c1df")),l=e.n(d),c=e("41dc"),r=e("bc3a"),m=e.n(r),u=e("0748"),h={name:"detailed",components:{Page:s["a"],DatePicker:i["default"],LaddaBtn:c["a"],Table:u["a"]},metaInfo:{title:"Relatório de Campanha Detalhado"},data:function(){return{datetime1:l()().hour(0).minute(0).second(0).toDate(),datetime2:l()().hour(23).minute(59).second(59).toDate(),agents:[],agent:"",queues:[],queue:"",table:[],loading:!1,filename:"",header:[],legend:[]}},mounted:function(){this.$store.commit("setTitle","Relatório de Campanha Detalhado"),this.loadQueues(),this.loadAgents()},methods:{updateHeader:function(){this.header=[],this.header.push("<h4>Relatório de Campanha Detalhado</h4>"),this.header.push("Período ".concat(l()(this.datetime1).format("DD/MM/YYYY")," à ").concat(l()(this.datetime2).format("DD/MM/YYYY")," / Hora à ").concat(l()(this.datetime1).format("HH:mm:ss")," até ").concat(l()(this.datetime2).format("HH:mm:ss"))),this.header.push(" "),this.filename="Rel_campanha_detalhado ".concat(l()().format("DD_MM_YYYY_HH_mm_ss")),this.legend=["<h5>Legenda:</h5>","<b>Origem</b> - Origem da chamada;","<b>Campanha</b> - Campanha criada;","<b>Telefone</b> - Identificador de chamada;","<b>Tempo de Espera</b> - Tempo na fila;","<b>Tempo de Atendimento</b> - Chamada em curso;","<b>Finalizados Por</b> - Finalizadas pelo operador ou usuário;","<b>Emitido em:</b> ".concat(l()().format("DD/MM/YYYY HH:mm:ss"))]},loadQueues:function(){var a=this;m.a.post("".concat(location.origin,"/reportsbackend/queues.php")).then((function(t){a.queues=t.data})).catch((function(a){return console.log(a)}))},loadAgents:function(){var a=this;m.a.post("".concat(location.origin,"/reportsbackend/agents.php")).then((function(t){a.agents=[],t.data.forEach((function(t){a.agents.push(t.agent)}))})).catch((function(a){return console.log(a)}))},getCampaingDetailed:function(){var a=this;this.loading=!0,this.table=[];var t=new URLSearchParams;t.append("time1",l()(this.datetime1).format("YYYY-MM-DD HH:mm:ss")),t.append("time2",l()(this.datetime2).format("YYYY-MM-DD HH:mm:ss")),t.append("queue",this.queue),t.append("agent",this.agent),m.a.post("".concat(location.origin,"/reportsbackend/report_campaing_detail.php"),t).then((function(t){t.data&&(0===t.data.length&&a.$bvToast.toast("Nenhum registro encontrado",{title:"Tecnomafer Report",autoHideDelay:5e3,appendToast:!0,toastClass:"bs4-toast bg-danger"}),t.data.forEach((function(t){var e=a.queues.find((function(a){return a.value===t.Campanha}));e&&(t.Campanha=e.text)}))),a.table=t.data,a.updateHeader()})).catch((function(a){return console.log(a)})).finally((function(t){a.loading=!1}))}}},p=h,b=e("2877"),f=Object(b["a"])(p,n,o,!1,null,null,null);t["default"]=f.exports}}]);
//# sourceMappingURL=chunk-2d21dbab.f3a615a4.js.map